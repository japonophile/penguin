<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <title>ペンギン　プログラミングクラブ</title>
        <link rel="stylesheet" href="styles/main.css" media="screen" />
        <link rel="stylesheet" href="styles/print.css" media="print" />
        <link rel="shortcut icon" type="image/x-icon" href="/penguin/favicon.ico" />
    </head>
    <body>
        <div class="header">
            <h1><a href="/penguin">ペンギン</a></h1>
            <h2>プログラミング クラブ</h2>
            <div class="outline">
                パソコンに興味がある<br />
                ゲームで遊ぶのは好きだけど、ゲームを作ってみたい<br />
                音楽やアニメをパソコンで作ってみたい
            </div>
        </div>
        <div class="topic">
            <h2>第２回：「ポングゲームを作ろう」</h2>
            <h3>概要</h3>
            <p><b>日程</b>： 2016/7/31 (日) 9:30-11:30</p>
            <p><b>課題</b>： Scratchを使って「ポング」と言うクラシックゲームの作成</p>
            <p style="text-align:center;">
                <img src="images/20160731/pong2-movie.gif" alt="ポング" />
            </p>

            <h3>内容</h3>
            <h4>1. ボールの作成</h4>

            <p class="goal">やりたいこと：ボールを作る</p>
            <p>やり方：</p>
            <ul>
                <li>猫のスプライトを削除する</li>
                <li>スプライトライブラリーからボールのスプライトを持ってくる</li>
                <li>「コスチューム」タブで不要なコスチュームを削除する</li>
                <li>スプライトのサイズを約25x25ピクセルに調整する（縮小ボタンで）</li>
            </ul>

            <img src="images/20160731/1-1.png" alt="猫を削除する" class="illustration" />
            <img src="images/20160731/1-2.png" alt="スプライトをライブラリーから選択" class="illustration" />
            <img src="images/20160731/1-3.png" alt="コスチュームの準備" class="illustration" />

            <h4>2. ボールの基本な動き</h4>

            <p>ボールの「スクリプト」タブで、ボールの動きのプログラムを作ってみよう。</p>
            <p class="goal">やりたいこと：ボールをずっと動かし続けて、壁にぶつかったら跳ね返るようにする</p>
            <p>やり方：</p>
            <ul>
                <li>イベントから「旗が押された時」（ゲームのスタート時点）</li>
                <li>制御から「ずっと」</li>
                <li>動きから「10歩動かす」</li>
                <li>そして「もし端に着いたら、跳ね返る」</li>
            </ul>

            <img src="images/20160731/2-1.png" alt="ボールのプログラム" class="illustration" />

            <h4>3. パドルの作成</h4>

            <p>次はパドル（ラケット）が必要です。</p>
            <p class="goal">やりたいこと：プレイヤーのパドルを作る</p>
            <p>やり方：</p>
            <ul>
                <li>えんぴつを選んで新しいスプライトを描く</li>
                <li>「四角形」を選んで、「塗りつぶす」方を選ぶ</li>
                <li>長方形を描く　→パドルの出来上がり！</li>
                <li>スプライトの情報（info）でスプライトの名前を分かりやすくしよう（例えば：「プレイヤーのパドル」）</li>
            </ul>

            <img src="images/20160731/3-1.png" alt="パドルを描く" class="illustration" />
            <img src="images/20160731/3-4.png" alt="スプライトの名前を変える" class="illustration" />

            <h4>4. プレイヤーのパドルの動き</h4>

            <p>プレイヤーがパドルを動かせるようにしよう。</p>
            <p class="goal">やりたいこと：マウスの動きに沿って、パドルを上下動かせるようにする。但し、x方向には動いて欲しくない。</p>
            <p>やり方：</p>
            <ul>
                <li>イベントから「旗が押された時」（ゲームのスタート時点）</li>
                <li>制御から「ずっと」</li>
                <li>動きから「y座標を◯◯にする」</li>
                <li>調べるから◯◯を「マウスのy座標」に変える</li>
            </ul>
            <p>パドルを右側に置いて試してみよう。</p>

            <img src="images/20160731/4-1.png" alt="パドルのプログラム" class="illustration" />

            <h4>5. 相手（パソコン）のパドル作成</h4>

            <p>次に、相手（パソコン）のパドルを作成しよう。</p>
            <p class="goal">やりたいこと：プレイヤーのパドルと同じものを作りたい。</p>
            <p>やり方：</p>
            <ul>
                <li>プレイヤーのパドルの上に右クリックで「複製」</li>
                <li>スプライトの情報（info）で名前を「パソコンのパドル」に変える</li>
            </ul>
            <p>パドルを右側に置いて試してみよう。</p>

            <img src="images/20160731/5-1.png" alt="パソコンのパドルを複製" class="illustration" />

            <h4>6. パソコンのパドルの動き</h4>

            <p>パソコンのパドルは今、プレイヤーのパドルと全く同じ動きをしていておかしいですね。</p>
            <p>このゲームに勝つにはどういう風にすれば良いでしょうか。</p>
            <p class="goal">やりたいこと：パソコンがうまくプレイできるように、パソコンのパドルをボールの位置に沿って動くようにする。</p>
            <p>やり方：</p>
            <ul>
                <li>プレイヤーのパドルのプログラムとほぼ同じですが、y座標をマウスのy座標の替わりに、調べるから「x座標 (パソコンのパドル)」を撮ってきて「y座標 (Ball)」に変える</li>
            </ul>
            <p>パソコンが上手にパドルを動かすようになった！</p>

            <img src="images/20160731/6-1.png" alt="パソコンのパドルの動き" class="illustration" />

            <h4>7. ボールが右に行きすぎると、負けるようにする</h4>

            <p>これまで、ボールはパドルに関係なく、壁に跳ね返っているので負けられない。</p>
            <p class="goal">やりたいこと：ボールが右に行き過ぎたら、負けるようにする。</p>
            <p>やり方：</p>
            <p>ボールが右側に行き過ぎると、跳ね返るのではなく、ゲームを終了する</p>
            <ul>
                <li>ボールを選択し、「スクリプト」タブに行く</li>
                <li>制御から「もし◯◯なら」を「10歩動かす」と「もし端に着いたら…」の間に入れる<br />
                　　※ 最初は「もし端に着いたら…」は中に入ってしまうので、「もし◯◯なら」を置いた後、<br />
                　　「もし端に着いたら…」を外に出すこと。</li>
                <li>演算から「◯ &gt; ◯」（より大きい）を条件として使う</li>
                <li>動きから「x座標」を「&gt;」の左側に</li>
                <li>右側は「225」を（半角で）手打ちする</li>
                <li>「もし…」の中側に、制御から「全てを止める」を入れる</li>
            </ul>
            <p>ヒント：x座標の値を常に確認するには、「x座標」の左側のチェックを入れる：そうすると値が常に画面に表示される</p>

            <img src="images/20160731/7-3.png" alt="ボールが右に行き過ぎたら" class="illustration" />
            <img src="images/20160731/7-6.png" alt="右に行き過ぎたら全てを止める" class="illustration" />
            <img src="images/20160731/7-7-1.png" alt="チェック" class="illustration" />
            <img src="images/20160731/7-7-2.png" alt="値が表示される" class="illustration" />

            <h4>8. ボールがパドルに跳ね返るようにする</h4>

            <p>これだと、何をしても負けてしまう。</p>
            <p class="goal">やりたいこと：ボールがパドルに跳ねるようにする。</p>
            <p>やり方：</p>
            <ul>
                <li>ボールのスクリプトで、制御から「もし◯◯なら」を「10歩動かす」と「もし…」の間に入れる</li>
                <li>調べるから「◯◯に触れた」を条件として使う</li>
                <li>◯◯を「プレイヤーのパドル」にする</li>
            </ul>
            <p>さて、次はどういう風に跳ね返るようにするか？</p>

            <img src="images/20160731/8-3.png" alt="もしプレイヤーのパドルに触れたなら" class="illustration" />

            <h4>9. 実験：どういう風に跳ね返るようにするか？</h4>

            <p class="goal">やりたいこと：ボールを跳ね返させるにはどうしたらよいか調べる</p>
            <p>やり方：</p>
            <p>ボールのスクリプト</p>
            <ul>
                <li>動きで「向き」の左にチェックを入れて、値を確認しよう</li>
                <li>一時的に、作ったプログラム（「もし…」から下）をどかし、邪魔にならないところに置く</li>
                <li>ゲームをスタートし、「向き」の値を観察してみよう。壁にぶつかった時に、どのように変わるか？</li>
            </ul>
            <p>観察したこと：</p>
            <ul>
                <li>例えば、向きが135で右の壁にぶつかったら、向きは-135になる。また、向きが-45で左の壁にぶつかったら、45になる</li>
                <li>向きが45で上の壁にぶつかったら、135になる。また、向きが135でしたの壁にぶつかると、45になる</li>
            </ul>
            <p>結果：</p>
            <ul>
                <li>上下の壁にぶつかった時は少し複雑なので、左右の壁にぶつかった時のケースだけを考える。<br />
                → 向きが反転する、つまり「-」がつく、あるいは「-」が付いてれば無くなる。<br />
                → 数学的に反転することは「かける-1」で出来ます。</li>
            </ul>
            <p>では、ボールのプログラムにもどろう。</p>

            <img src="images/20160731/9-2.png" alt="向きを観察する" class="illustration" />

            <h4>10. ボールがパドルに跳ね返るようにする</h4>

            <p>「もし…」の中側の処理を作りましょう。</p>
            <p class="goal">やりたいこと：ボールがパドルに跳ねるようにする。</p>
            <p>やり方：</p>
            <ul>
                <li>一時的に横に置いたブロックを元に戻す</li>
                <li>動きから「90度に向ける」を取る</li>
                <li>演算から「◯ * ◯」を取る。　プログラミングの世界では、* (星)は掛け算を意味している。</li>
                <li>左側は（半角で）-1を入力する</li>
                <li>右側は、動きから「向き」を入れる<br />
                つまり、「(-1 * 向き)度に向ける」になる。<br />
                ※ 「(0 - 向き)度に向ける」でもOK（同じ意味です）</li>
            </ul>

            <p>さー、試してみよう。ゲームらしくなってきましたね。</p>
            <p>パドルをボールのところに動かすと、跳ね返る。</p>
            <p>パドルがないと、ゲームが終わる。</p>

            <img src="images/20160731/10-5.png" alt="ボールがパドルに跳ね返る" class="illustration" />

            <h4>11. ボールが右に行き過ぎたら、プレイヤーの勝ち</h4>

            <p>パソコンのパドルを一度止めてみよう。</p>
            <p>パソコンのパドルのスクリプトで「ずっと…」を一時的に横にどかす。</p>
            <p>プレイしてみて、どうなるの？</p>
            <p>そうです。パソコンはパドルを動かさなくても負けない。</p>
            <p>なぜでしょう？　→ ボールが跳ね返るから。</p>
            <p class="goal">やりたいこと：ボールが左に行き過ぎるとゲームを終了する</p>
            <p>やり方：</p>
            <ul>
                <li>ボールのスクリプトに戻って、右の壁と似たような（逆な）ロジックです</li>
                <li>制御から「もし◯◯なら」を「もしx座標 &gt; 225なら」と「もし端に着いたら…」の間に入れる</li>
                <li>演算から「◯ &lt; ◯」（より小さい）を条件として使う</li>
                <li>動きから「x座標」を「&lt;」の左側に</li>
                <li>右側は「-225」を（半角で）手打ちする （マイナスを忘れずに！）</li>
                <li>「もし…」の中側に、制御から「全てを止める」を入れる</li>
            </ul>

            <img src="images/20160731/11-0.png" alt="パソコンのパドルの動きを一時的に止める" class="illustration" />
            <img src="images/20160731/11-6.png" alt="ボールが左に行き過ぎたら全てを止める" class="illustration" />

            <h4>12. ボールがパソコンのパドルに跳ね返るようにする</h4>

            <p>今度は、パソコンが負けっぱなしだね。</p>
            <p class="goal">やりたいこと：ボールがパソコンのパドルに触れたら、跳ね返るようにする</p>
            <p>プレイヤーのパドルに触れた時と同じですね。</p>
            <p>やり方：</p>
            <ul>
                <li>ボールのスクリプトで、制御から「もし◯◯なら」を「もしプレイヤーのパドルに触れたなら」と「もし…」の間に入れる</li>
                <li>調べるから「◯◯に触れた」を条件として使う</li>
                <li>◯◯を「パソコンのパドル」にする</li>
                <li>動きから「90度に向ける」を「もしパソコンのパドルに触れたなら」の中側に入れる</li>
                <li>演算から「◯ * ◯」を取る。</li>
                <li>左側は（半角で）-1を入力する</li>
                <li>右側は、動きから「向き」を入れる</li>
            </ul>

            <p>これをテストしたいけど、パソコンのパドルは動かないね。</p>
            <ul>
                <li>パソコンのプログラムを元に戻してみよう。<br />
                パソコンはうますぎるね。一度ミスしてないので、勝てるかどうか確認できないね。<br />
                確認するにはパソコンのパドルのスクリプトを一時的にマウスで操作できるようにしよう。</li>
                <li>ずっとのブロックをどかして、「ずっと」「y座標をマウスのy座標にする」に変えてみよう<br />
                → ちゃんと動きましたね！</li>
                <li>パソコンのパドルのスクリプトを元に戻そう。</li>
            </ul>

            <img src="images/20160731/12-10.png" alt="パソコンのパドルをマウスで動かす" class="illustration" />
            <img src="images/20160731/12-7.png" alt="ボールがパソコンのパドルに跳ね返る" class="illustration" />
            <img src="images/20160731/12-8.png" alt="パソコンのスクリプトを元に" class="illustration" />

            <h4>13. プログラムを単純化しよう</h4>

            <p>次は、パソコンのプログラムを改善したけど、その前に、ボールのプログラムを読みやすくしよう。</p>
            <p class="goal">やりたいこと：ボールのプログラムが複雑になっているので、読みやすくしたい</p>
            <p>やり方：</p>
            <ul>
                <li>重複する部分をまとめる。その1：全てを止めるは２回書いているね<br />
                　→ ２つの「もし◯◯なら」を１つにまとめるには、演算で「◯又は◯」を使おう</li>
                <li>重複する部分をまとめる。その2：「(-1 * 向き)度に向ける」も２回出ている<br />
                　→ ２つの「もし◯◯なら」を１つにまとめる</li>
                <li>分かりにくい処理を別ブロックでまとめる<br />
                　「(-1 * 向き)度に向ける」の意味は覚えている？<br />
                　後で忘れてしまいそうだね。<br />
                　忘れないように名前をつけよう：<br />
                <ul>
                    <li>その他から、「ブロックを作る」</li>
                    <li>「左右に跳ね返る」と言う名前にしよう　→ OK</li>
                    <li>「(-1 * 向き)度に向ける」を新しいブロックの中に動かす</li>
                    <li>新しいブロックを「もし…」の中側から呼び出す</li>
                </ul>
                プログラムは少し長くなったが、後々読みやすくなったはずだ。</li>
            </ul>

            <img src="images/20160731/13-2.png" alt="もしならを１つにまとめる" class="illustration" />
            <img src="images/20160731/13-3-1.png" alt="新しいブロックを作る" class="illustration" />
            <img src="images/20160731/13-3-2.png" alt="新しいブロックを呼び出す" class="illustration" />

            <h4>14. ボールがいつも真ん中からスタートするように</h4>

            <p>ゲームを始める前にいつもボールを動かすのは大変。</p>
            <p>やりたいとこ：ゲームを始める時に、ボールを中央に置く。</p>
            <p>やり方：</p>
            <ul>
                <li>ボールのプログラムの一番最初に、動きから「x座標を0、y座標を0にする」</li>
            </ul>

            <img src="images/20160731/14-1.png" alt="ボールを真ん中からスタートさせる" class="illustration" />

            <h4>15. プレイヤーも勝てるようにする</h4>

            <p>これで遊んでみよう。</p>
            <p>パソコンに勝てますか？　なかなか勝てないですね。　なぜ？</p>
            <p>→ パソコンの動きがうますぎて、いつもボールに追従しているからだね。</p>
            <p>やりたいとこ：パソコンのパドルの動きをパソコンでも負けるようにしたい</p>
            <p>これはゲームのAIと言ってArtificial Intelligence、つまり人工知能だ。</p>
            <p>ゲームの中で一番難しい部分だ。</p>
            <p>やり方：</p>
            <p>やり方は色々あります。アイディアを出そう。</p>
            <p>これは１つのやり方。</p>
            <p>パドルをいつもボールのy座標と一致させるとうますぎるので、パドルとボールのy座標の距離を縮めることにしよう。</p>
            <ul>
                <li>まず、データで「変数を作る」を選んで、「ボールまでの距離」と名付けよう</li>
                <li>「ボールまでの距離を◯にする」を持ってくる</li>
                <li>演算から「◯ - ◯」</li>
                <li>調べるから「y座標 (Ball)」を左側に</li>
                <li>動きから「y座標」を右に</li>
                <li>動きから「y座標を◯ずつ変える」を下に入れる</li>
                <li>◯をさっき計算した「ボールまでの距離」にしよう<br />
                　どうなるの？　前と同じですね。<br />
                　パドルのy座標をボールまでの距離ずつ変えると、いつもぴったりボールの位置になるね</li>
                <li>今度は、演算から「◯ / ◯」（割り算）を持ってきて「ボールまでの距離」を4で割ってみよう<br />
                　つまり、毎回、ボールの位置までに動くよりも、途中まで、つまりボールの距離の４分の１まで動くようになる<br />
                　つまり、パドルがいつも少し遅れる。</li>
            </ul>

            <img src="images/20160731/15-1.png" alt="ボールまでの距離を計算する" class="illustration" />
            <img src="images/20160731/15-2.png" alt="ボールまでの距離を縮める" class="illustration" />

            <h4>16. 勝った時と負けた時の背景を変える</h4>

            <p class="goal">やりたいこと：勝った時に「おめでとう！」、また負けた時に「残念！」の背景を表示したい</p>
            <p>やり方：</p>
            <ul>
                <li>ステージの「背景」タブで背景１を複製する</li>
                <li>GAME OVERなどの文字を書く</li>
                <li>また背景１を複製し、YOU WIN! などを書く</li>
                <li>ボールのプログラムに戻って、スタート時に「背景１」にする</li>
                <li>まとめた条件をまた２つに別ける（まとめすぎちゃいました！）</li>
                <li>勝った時にYOU WINの背景を表示する</li>
                <li>負けた時にGAME OVERの背景を表示する</li>
            </ul>

            <img src="images/20160731/16-3.png" alt="背景を作る" class="illustration" />
            <img src="images/20160731/16-7.png" alt="背景を状況に合わせて変える" class="illustration" />
            <img src="images/20160731/16-8.png" alt="勝った！" class="illustration" />
        </div>
        <div class="footer">
        </div>
        <script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
              (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
               m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
            ga('create', 'UA-79550036-1', 'auto');
            ga('send', 'pageview');
        </script>
    </body>
</html>
